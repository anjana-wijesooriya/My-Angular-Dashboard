!function(t){"use strict";if("object"==typeof exports)module.exports=t("undefined"!=typeof angular?angular:require("angular"),"undefined"!=typeof Chart?Chart:require("chart.js"));else if("function"==typeof define&&define.amd)define(["angular","chart"],t);else{if("undefined"==typeof angular)throw new Error("AngularJS framework needs to be included, see https://angularjs.org/");if("undefined"==typeof Chart)throw new Error("Chart.js library needs to be included, see http://jtblin.github.io/angular-chart.js/");t(angular,Chart)}}(function(t,r){"use strict";r.defaults.global.multiTooltipTemplate="<%if (datasetLabel){%><%=datasetLabel%>: <%}%><%= value %>",r.defaults.global.tooltips.mode="label",r.defaults.global.elements.line.borderWidth=2,r.defaults.global.elements.rectangle.borderWidth=2,r.defaults.global.legend.display=!1,r.defaults.global.colors=["#97BBCD","#DCDCDC","#F7464A","#46BFBD","#FDB45C","#949FB1","#4D5360"];var e="object"==typeof window.G_vmlCanvasManager&&null!==window.G_vmlCanvasManager&&"function"==typeof window.G_vmlCanvasManager.initElement;return e&&(r.defaults.global.animation=!1),t.module("chart.js",[]).provider("ChartJs",function(){var e={responsive:!0},a={Chart:r,getOptions:function(r){var a=r&&e[r]||{};return t.extend({},e,a)}};this.setOptions=function(r,n){n?e[r]=t.merge(e[r]||{},n):(n=r,e=t.merge(e,n)),t.merge(a.Chart.defaults,e)},this.$get=function(){return a}}).factory("ChartJsFactory",["ChartJs","$timeout",function(a,n){return function(r){return{restrict:"CA",scope:{chartGetColor:"=?",chartType:"=",chartData:"=?",chartLabels:"=?",chartOptions:"=?",chartSeries:"=?",chartColors:"=?",chartClick:"=?",chartHover:"=?",chartDatasetOverride:"=?"},link:function(a,n){function i(e,c){if(!d(e)&&!t.equals(e,c)){var i=r||a.chartType;i&&o(i,a,n)}}e&&window.G_vmlCanvasManager.initElement(n[0]),a.$watch("chartData",function(t,e){if(!t||!t.length||Array.isArray(t[0])&&!t[0].length)return void g(a);var i=r||a.chartType;if(!i)return;if(a.chart&&function(t,r){if(t&&r&&t.length&&r.length)return Array.isArray(t[0])?t.length===r.length&&t.every(function(t,e){return t.length===r[e].length}):r.reduce(c,0)>0&&t.length===r.length;return!1}(t,e))return function(t,r){Array.isArray(r.chartData[0])?r.chart.data.datasets.forEach(function(r,e){r.data=t[e]}):r.chart.data.datasets[0].data=t;r.chart.update(),r.$emit("chart-update",r.chart)}(t,a);o(i,a,n)},!0),a.$watch("chartSeries",i,!0),a.$watch("chartLabels",i,!0),a.$watch("chartOptions",i,!0),a.$watch("chartColors",i,!0),a.$watch("chartDatasetOverride",i,!0),a.$watch("chartType",function(r,e){if(d(r))return;if(t.equals(r,e))return;o(r,a,n)},!1),a.$on("$destroy",function(){g(a)}),a.$on("$resize",function(){a.chart&&a.chart.resize()})}}};function o(e,c,h){var s,f,d=(s=e,f=c,t.extend({},a.getOptions(s),f.chartOptions));if((p=c).chartData&&p.chartData.length&&function(t,r,e,a){if(a.responsive&&0===e[0].clientHeight)return n(function(){o(t,r,e)},50,!1),!1;return!0}(e,c,h,d)){var p,v,C=h[0],y=C.getContext("2d");c.chartGetColor="function"==typeof(v=c).chartGetColor?v.chartGetColor:l;var b,m,w,D,A,B,$,k,F,j,J,E,O,G,H=($=function(e,n){var o=t.copy(n.chartColors||a.getOptions(e).chartColors||r.defaults.global.colors),c=o.length<n.chartData.length;for(;o.length<n.chartData.length;)o.push(n.chartGetColor());c&&(n.chartColors=o);return o.map(u)}(e,B=c),Array.isArray(B.chartData[0])?(k=B.chartLabels,F=B.chartData,j=B.chartSeries||[],J=$,E=B.chartDatasetOverride,{labels:k,datasets:F.map(function(r,e){var a=t.extend({},J[e],{label:j[e],data:r});return E&&E.length>=e&&t.merge(a,E[e]),a})}):(b=B.chartLabels,m=B.chartData,w=$,D=B.chartDatasetOverride,A={labels:b,datasets:[{data:m,backgroundColor:w.map(function(t){return t.pointBackgroundColor}),hoverBackgroundColor:w.map(function(t){return t.backgroundColor})}]},D&&t.merge(A.datasets[0],D),A));g(c),c.chart=new a.Chart(y,{type:e,data:H,options:d}),c.$emit("chart-create",c.chart),G=c,(O=C).onclick=G.chartClick?i(G,"chartClick",!1):t.noop,O.onmousemove=G.chartHover?i(G,"chartHover",!0):t.noop}}function c(t,r){return t+r}function i(r,e,a){var n={point:void 0,points:void 0};return function(o){var c=r.chart.getElementAtEvent||r.chart.getPointAtEvent,i=r.chart.getElementsAtEvent||r.chart.getPointsAtEvent;if(i){var u=i.call(r.chart,o),l=c?c.call(r.chart,o)[0]:void 0;!1!==a&&(t.equals(n.points,u)||t.equals(n.point,l))||(n.point=l,n.points=u,r[e](u,o,l))}}}function u(t){return"string"==typeof t&&"r"===t[0]?h(function(t){var r=t.match(/^rgba?\(([\d,.]+)\)$/);if(!r)throw new Error("Cannot parse rgb value");return(t=r[1].split(",")).map(Number)}(t)):"string"==typeof t&&"#"===t[0]?h((r=t.substr(1),[(e=parseInt(r,16))>>16&255,e>>8&255,255&e])):"object"==typeof t&&null!==t?t:l();var r,e}function l(){var t=[s(0,255),s(0,255),s(0,255)];return h(t)}function h(t){var r=t[3]||1;return{backgroundColor:f(t=t.slice(0,3),.2),pointBackgroundColor:f(t,r),pointHoverBackgroundColor:f(t,.8),borderColor:f(t,r),pointBorderColor:"#fff",pointHoverBorderColor:f(t,r)}}function s(t,r){return Math.floor(Math.random()*(r-t+1))+t}function f(t,r){return e?"rgb("+t.join(",")+")":"rgba("+t.concat(r).join(",")+")"}function d(t){return!t||Array.isArray(t)&&!t.length||"object"==typeof t&&!Object.keys(t).length}function g(t){t.chart&&(t.chart.destroy(),t.$emit("chart-destroy",t.chart))}}]).directive("chartBase",["ChartJsFactory",function(t){return new t}]).directive("chartLine",["ChartJsFactory",function(t){return new t("line")}]).directive("chartBar",["ChartJsFactory",function(t){return new t("bar")}]).directive("chartHorizontalBar",["ChartJsFactory",function(t){return new t("horizontalBar")}]).directive("chartRadar",["ChartJsFactory",function(t){return new t("radar")}]).directive("chartDoughnut",["ChartJsFactory",function(t){return new t("doughnut")}]).directive("chartPie",["ChartJsFactory",function(t){return new t("pie")}]).directive("chartPolarArea",["ChartJsFactory",function(t){return new t("polarArea")}]).directive("chartBubble",["ChartJsFactory",function(t){return new t("bubble")}]).name});